{
    "version": 3,
    "terraform_version": "0.10.8",
    "serial": 29,
    "lineage": "39d0e04f-8267-42ec-a4fc-bdfaa9930f6e",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {
                "service_ip": {
                    "sensitive": false,
                    "type": "string",
                    "value": "34.238.8.62"
                }
            },
            "resources": {
                "aws_eip.service_ip": {
                    "type": "aws_eip",
                    "depends_on": [
                        "aws_instance.api_instance"
                    ],
                    "primary": {
                        "id": "eipalloc-a5e94f91",
                        "attributes": {
                            "association_id": "eipassoc-60afac56",
                            "domain": "vpc",
                            "id": "eipalloc-a5e94f91",
                            "instance": "i-0cb9a0fbf82784ee0",
                            "network_interface": "eni-a60c5e2a",
                            "private_ip": "172.31.56.189",
                            "public_ip": "34.238.8.62",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_instance_profile.default": {
                    "type": "aws_iam_instance_profile",
                    "depends_on": [
                        "aws_iam_role.default"
                    ],
                    "primary": {
                        "id": "badge-api-dev",
                        "attributes": {
                            "arn": "arn:aws:iam::041645119857:instance-profile/badge-api-dev",
                            "id": "badge-api-dev",
                            "name": "badge-api-dev",
                            "path": "/",
                            "role": "badge-api-dev",
                            "roles.#": "1",
                            "roles.2067153015": "badge-api-dev",
                            "unique_id": "AIPAIWGVXWJWZXUHJGBD4"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_role.default": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "badge-api-dev",
                        "attributes": {
                            "arn": "arn:aws:iam::041645119857:role/badge-api-dev",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2017-11-21T18:57:50Z",
                            "force_detach_policies": "false",
                            "id": "badge-api-dev",
                            "name": "badge-api-dev",
                            "path": "/",
                            "unique_id": "AROAJH627GLFONLJHAM3G"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_role_policy.default": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.default"
                    ],
                    "primary": {
                        "id": "badge-api-dev:badge-api-dev",
                        "attributes": {
                            "id": "badge-api-dev:badge-api-dev",
                            "name": "badge-api-dev",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"s3:ListBucket\",\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"logs:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
                            "role": "badge-api-dev"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.api_instance": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_iam_instance_profile.default",
                        "aws_security_group.instances",
                        "data.template_file.userdata"
                    ],
                    "primary": {
                        "id": "i-0cb9a0fbf82784ee0",
                        "attributes": {
                            "ami": "ami-ad593cbb",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-east-1d",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "badge-api-dev",
                            "id": "i-0cb9a0fbf82784ee0",
                            "instance_state": "running",
                            "instance_type": "t2.medium",
                            "ipv6_addresses.#": "0",
                            "key_name": "honda_hackaton",
                            "monitoring": "false",
                            "network_interface.#": "0",
                            "network_interface_id": "eni-a60c5e2a",
                            "primary_network_interface_id": "eni-a60c5e2a",
                            "private_dns": "ip-172-31-56-189.ec2.internal",
                            "private_ip": "172.31.56.189",
                            "public_dns": "ec2-34-238-8-62.compute-1.amazonaws.com",
                            "public_ip": "34.238.8.62",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "1",
                            "security_groups.4131239156": "badge-api-security-group-instances-dev",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-00e3b22d",
                            "tags.%": "0",
                            "tenancy": "default",
                            "user_data": "fee7f0c15b3ef21ae675cd6e9f08c81f707fb7bd",
                            "volume_tags.%": "0",
                            "vpc_security_group_ids.#": "0"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.instances": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-1b5efb6e",
                        "attributes": {
                            "description": "Managed by Terraform",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.description": "",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.ipv6_cidr_blocks.#": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-1b5efb6e",
                            "ingress.#": "4",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.description": "",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.ipv6_cidr_blocks.#": "0",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.description": "",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.ipv6_cidr_blocks.#": "0",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "ingress.516175195.cidr_blocks.#": "1",
                            "ingress.516175195.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.516175195.description": "",
                            "ingress.516175195.from_port": "8080",
                            "ingress.516175195.ipv6_cidr_blocks.#": "0",
                            "ingress.516175195.protocol": "tcp",
                            "ingress.516175195.security_groups.#": "0",
                            "ingress.516175195.self": "false",
                            "ingress.516175195.to_port": "8080",
                            "ingress.876904299.cidr_blocks.#": "1",
                            "ingress.876904299.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.876904299.description": "",
                            "ingress.876904299.from_port": "4914",
                            "ingress.876904299.ipv6_cidr_blocks.#": "0",
                            "ingress.876904299.protocol": "tcp",
                            "ingress.876904299.security_groups.#": "0",
                            "ingress.876904299.self": "false",
                            "ingress.876904299.to_port": "4914",
                            "name": "badge-api-security-group-instances-dev",
                            "owner_id": "041645119857",
                            "revoke_rules_on_delete": "false",
                            "tags.%": "0",
                            "vpc_id": "vpc-f6274390"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.userdata": {
                    "type": "template_file",
                    "depends_on": [
                        "random_id.default"
                    ],
                    "primary": {
                        "id": "c4d9aa60319c5c6d4ac219fd7d41a4273fef6c21d4c227e5899add1dcd56de9b",
                        "attributes": {
                            "id": "c4d9aa60319c5c6d4ac219fd7d41a4273fef6c21d4c227e5899add1dcd56de9b",
                            "rendered": "#cloud-config\n# version #1\ncoreos:\n  update:\n    reboot-strategy: off\n  units:\n    - name: update-engine.service\n      command: stop\n    - name: locksmithd.service\n      command: stop\n    - name: systemd-journal-gatewayd.socket\n      command: start\n      enable: yes\n    - name: systemd-journal-gatewayd.service\n      command: start\n      enable: yes\n    - name: cadvisor.service\n      command: start\n      runtime: true\n      content: |\n        [Unit]\n        Description=cadvisor\n\n        [Service]\n        Restart=on-failure\n        RestartSec=30\n        RestartPreventExitStatus=5\n        SyslogIdentifier=cadvisor\n        ExecStartPre=-/usr/bin/mkdir -p /srv/cadvisor\n        ExecStartPre=-/usr/bin/wget -O /srv/cadvisor/cadvisor https://github.com/google/cadvisor/releases/download/v0.22.0/cadvisor\n        ExecStartPre=-/usr/bin/chmod +x /srv/cadvisor/cadvisor\n        ExecStart=/srv/cadvisor/cadvisor -port 4914\n    - name: badge-api.service\n      command: start\n      runtime: true\n      content: |\n        [Unit]\n        Description=badge-api\n\n        [Service]\n        Restart=on-failure\n        RestartSec=10\n        RestartPreventExitStatus=5\n        SyslogIdentifier=badge-api.service\n        ExecStartPre=-/usr/bin/docker pull maxsakharov/badge-parking-api:dev\n        ExecStart=-/usr/bin/docker run --rm -it --name badge-api -p 8080:8080 maxsakharov/badge-parking-api:dev",
                            "template": "#cloud-config\n# version #1\ncoreos:\n  update:\n    reboot-strategy: off\n  units:\n    - name: update-engine.service\n      command: stop\n    - name: locksmithd.service\n      command: stop\n    - name: systemd-journal-gatewayd.socket\n      command: start\n      enable: yes\n    - name: systemd-journal-gatewayd.service\n      command: start\n      enable: yes\n    - name: cadvisor.service\n      command: start\n      runtime: true\n      content: |\n        [Unit]\n        Description=cadvisor\n\n        [Service]\n        Restart=on-failure\n        RestartSec=30\n        RestartPreventExitStatus=5\n        SyslogIdentifier=cadvisor\n        ExecStartPre=-/usr/bin/mkdir -p /srv/cadvisor\n        ExecStartPre=-/usr/bin/wget -O /srv/cadvisor/cadvisor ${cadvisor_url}\n        ExecStartPre=-/usr/bin/chmod +x /srv/cadvisor/cadvisor\n        ExecStart=/srv/cadvisor/cadvisor -port ${cadvisor_port}\n    - name: badge-api.service\n      command: start\n      runtime: true\n      content: |\n        [Unit]\n        Description=badge-api\n\n        [Service]\n        Restart=on-failure\n        RestartSec=10\n        RestartPreventExitStatus=5\n        SyslogIdentifier=badge-api.service\n        ExecStartPre=-/usr/bin/docker pull maxsakharov/badge-parking-api:${docker_image_tag}\n        ExecStart=-/usr/bin/docker run --rm -it --name badge-api -p 8080:8080 maxsakharov/badge-parking-api:${docker_image_tag}",
                            "vars.%": "5",
                            "vars.cadvisor_port": "4914",
                            "vars.cadvisor_url": "https://github.com/google/cadvisor/releases/download/v0.22.0/cadvisor",
                            "vars.docker_image_tag": "dev",
                            "vars.random": "a726a50db426f5588d2e6480c59a8676",
                            "vars.region": "us-east-1"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "random_id.default": {
                    "type": "random_id",
                    "depends_on": [],
                    "primary": {
                        "id": "pyalDbQm9ViNLmSAxZqGdg",
                        "attributes": {
                            "b64": "pyalDbQm9ViNLmSAxZqGdg",
                            "b64_std": "pyalDbQm9ViNLmSAxZqGdg==",
                            "b64_url": "pyalDbQm9ViNLmSAxZqGdg",
                            "byte_length": "16",
                            "dec": "222181730260010388998138706880989136502",
                            "hex": "a726a50db426f5588d2e6480c59a8676",
                            "id": "pyalDbQm9ViNLmSAxZqGdg"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        }
    ]
}
